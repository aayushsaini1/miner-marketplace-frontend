{"ast":null,"code":"import _classCallCheck from\"/Users/saumay/Desktop/miner-marketplace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/saumay/Desktop/miner-marketplace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/saumay/Desktop/miner-marketplace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/saumay/Desktop/miner-marketplace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import OrchestratorTable from'../OrchestratorTable';import{PageHeader}from'antd';import Config from'../../Config';export var OrchestratorStats=/*#__PURE__*/function(_Component){_inherits(OrchestratorStats,_Component);var _super=_createSuper(OrchestratorStats);function OrchestratorStats(){var _this;_classCallCheck(this,OrchestratorStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:null,responseStatus:null};return _this;}_createClass(OrchestratorStats,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(Config.api_url+'/orchestratorStats').then(function(res){axios.post(Config.livepeer_api,{query:\"{\\n                            transcoders (orderBy:totalGeneratedFees) {\\n                                totalGeneratedFees\\n                                id\\n                            }\\n                        }\",headers:{'Content-Type':'application/json'}}).then(function(result){result=result.data.data.transcoders;// console.log(result)\nvar new_data=res.data;for(var i=0;i<new_data.length;i++){new_data[i][\"TotalGeneratedFees\"]=null;for(var j=0;j<result.length;j++){if(new_data[i].Address===result[j].id){// console.log(new_data[i].Address, result[j].id)\nnew_data[i][\"TotalGeneratedFees\"]=Number(result[j].totalGeneratedFees);break;}}}// console.log(new_data)\n_this2.setState({data:new_data,responseStatus:\"success\"});}).catch(function(err){console.log(err);_this2.setState({data:null,responseStatus:\"failed\"});});}).catch(function(err){console.log(err);_this2.setState({data:null,responseStatus:\"failed\"});});}},{key:\"render\",value:function render(){if(!this.state.responseStatus){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"Fetching data from the server...\"));}else{if(this.state.data){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PageHeader,{className:\"site-page-header\",backIcon:\"false\",title:\"Orchestrator Statistics\",subTitle:\"\"}),/*#__PURE__*/React.createElement(OrchestratorTable,{data:this.state.data}));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"Error in fetching data from the server. See console for more details.\"));}}}}]);return OrchestratorStats;}(Component);export default OrchestratorStats;","map":{"version":3,"sources":["/Users/saumay/Desktop/miner-marketplace-frontend/src/components/pages/OrchestratorStats.js"],"names":["React","Component","axios","OrchestratorTable","PageHeader","Config","OrchestratorStats","state","data","responseStatus","get","api_url","then","res","post","livepeer_api","query","headers","result","transcoders","new_data","i","length","j","Address","id","Number","totalGeneratedFees","setState","catch","err","console","log"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,sBAA9B,CACA,OAASC,UAAT,KAA2B,MAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA,UAAaC,CAAAA,iBAAb,uWAEIC,KAFJ,CAEY,CACJC,IAAI,CAAE,IADF,CAEJC,cAAc,CAAE,IAFZ,CAFZ,0GAOwB,iBAChBP,KAAK,CAACQ,GAAN,CAAUL,MAAM,CAACM,OAAP,CAAiB,oBAA3B,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CAETX,KAAK,CAACY,IAAN,CAAWT,MAAM,CAACU,YAAlB,CAAgC,CAC5BC,KAAK,8NADuB,CAO5BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAPmB,CAAhC,EAWCL,IAXD,CAWM,SAACM,MAAD,CAAY,CACdA,MAAM,CAAGA,MAAM,CAACV,IAAP,CAAYA,IAAZ,CAAiBW,WAA1B,CACA;AACA,GAAIC,CAAAA,QAAQ,CAAGP,GAAG,CAACL,IAAnB,CAEA,IAAK,GAAIa,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,QAAQ,CAACE,MAA7B,CAAqCD,CAAC,EAAtC,CAA0C,CACtCD,QAAQ,CAACC,CAAD,CAAR,CAAY,oBAAZ,EAAoC,IAApC,CACA,IAAK,GAAIE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAAM,CAACI,MAA3B,CAAmCC,CAAC,EAApC,CAAwC,CACpC,GAAIH,QAAQ,CAACC,CAAD,CAAR,CAAYG,OAAZ,GAAwBN,MAAM,CAACK,CAAD,CAAN,CAAUE,EAAtC,CAA0C,CACtC;AACAL,QAAQ,CAACC,CAAD,CAAR,CAAY,oBAAZ,EAAoCK,MAAM,CAACR,MAAM,CAACK,CAAD,CAAN,CAAUI,kBAAX,CAA1C,CACA,MACH,CACJ,CACJ,CACD;AACA,MAAI,CAACC,QAAL,CAAc,CAAEpB,IAAI,CAAEY,QAAR,CAAkBX,cAAc,CAAE,SAAlC,CAAd,EACH,CA5BD,EA6BCoB,KA7BD,CA6BO,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,MAAI,CAACF,QAAL,CAAc,CAAEpB,IAAI,CAAE,IAAR,CAAcC,cAAc,CAAE,QAA9B,CAAd,EACH,CAhCD,EAiCH,CApCL,EAqCKoB,KArCL,CAqCW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,MAAI,CAACF,QAAL,CAAc,CAAEpB,IAAI,CAAE,IAAR,CAAcC,cAAc,CAAE,QAA9B,CAAd,EACH,CAxCL,EAyCH,CAjDL,uCAmDa,CACL,GAAI,CAAC,KAAKF,KAAL,CAAWE,cAAhB,CAAgC,CAC5B,mBACI,oBAAC,KAAD,CAAO,QAAP,mBACI,gEADJ,CADJ,CAKH,CAND,IAMO,CACH,GAAI,KAAKF,KAAL,CAAWC,IAAf,CAAqB,CACjB,mBACI,oBAAC,KAAD,CAAO,QAAP,mBACI,oBAAC,UAAD,EACI,SAAS,CAAC,kBADd,CAEI,QAAQ,CAAC,OAFb,CAGI,KAAK,CAAC,yBAHV,CAII,QAAQ,CAAC,EAJb,EADJ,cAOI,oBAAC,iBAAD,EAAmB,IAAI,CAAE,KAAKD,KAAL,CAAWC,IAApC,EAPJ,CADJ,CAWH,CAZD,IAYO,CACH,mBACI,oBAAC,KAAD,CAAO,QAAP,mBACI,qGADJ,CADJ,CAKH,CACJ,CACJ,CA/EL,+BAAuCP,SAAvC,EAkFA,cAAeK,CAAAA,iBAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport OrchestratorTable from '../OrchestratorTable'\nimport { PageHeader } from 'antd';\nimport Config from '../../Config'\n\nexport class OrchestratorStats extends Component {\n\n    state = {\n        data: null,\n        responseStatus: null\n    }\n\n    componentDidMount() {\n        axios.get(Config.api_url + '/orchestratorStats')\n            .then(res => {\n\n                axios.post(Config.livepeer_api, {\n                    query: `{\n                            transcoders (orderBy:totalGeneratedFees) {\n                                totalGeneratedFees\n                                id\n                            }\n                        }`,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .then((result) => {\n                    result = result.data.data.transcoders\n                    // console.log(result)\n                    let new_data = res.data\n\n                    for (let i = 0; i < new_data.length; i++) {\n                        new_data[i][\"TotalGeneratedFees\"] = null\n                        for (let j = 0; j < result.length; j++) {\n                            if (new_data[i].Address === result[j].id) {\n                                // console.log(new_data[i].Address, result[j].id)\n                                new_data[i][\"TotalGeneratedFees\"] = Number(result[j].totalGeneratedFees)\n                                break\n                            }\n                        } \n                    }\n                    // console.log(new_data)\n                    this.setState({ data: new_data, responseStatus: \"success\" })\n                })\n                .catch(err => {\n                    console.log(err)\n                    this.setState({ data: null, responseStatus: \"failed\" })\n                })\n            })\n            .catch(err => {\n                console.log(err)\n                this.setState({ data: null, responseStatus: \"failed\" })\n            })\n    }\n\n    render() {\n        if (!this.state.responseStatus) {\n            return (\n                <React.Fragment>\n                    <p>Fetching data from the server...</p>\n                </React.Fragment>\n            )\n        } else {\n            if (this.state.data) {\n                return (\n                    <React.Fragment>\n                        <PageHeader\n                            className=\"site-page-header\"\n                            backIcon=\"false\"\n                            title=\"Orchestrator Statistics\"\n                            subTitle=\"\"\n                        />\n                        <OrchestratorTable data={this.state.data} />\n                    </React.Fragment>\n                )\n            } else {\n                return (\n                    <React.Fragment>\n                        <p>Error in fetching data from the server. See console for more details.</p>\n                    </React.Fragment>\n                )\n            }\n        }\n    }\n}\n\nexport default OrchestratorStats\n"]},"metadata":{},"sourceType":"module"}