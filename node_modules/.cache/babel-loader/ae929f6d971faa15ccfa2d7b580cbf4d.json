{"ast":null,"code":"var _jsxFileName = \"/Users/saumay/Desktop/miner-marketplace-frontend/src/components/pages/MinerProfile.js\";\nimport React, { Component } from 'react';\nimport PriceHistoryGraph from '../PriceHistoryGraph';\nimport axios from 'axios';\nimport { PageHeader } from 'antd';\nimport Config from '../../Config';\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Card } from 'antd';\nimport TransactionTable from '../TransactionTable';\nimport AddressChangeTable from '../AddressChangeTable';\nconst {\n  Header,\n  Content,\n  Footer\n} = Layout;\nexport class MinerProfile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      responseStatus: null\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.match.params.address + \" miner id\");\n    axios.post(Config.miner_marketplace_api, {\n      query: `query ($id: ID!) {\n                miner(id: $id) {\n                    id\n                    address\n                    name\n                    bio\n                    owner {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    worker {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    contact {\n                      email\n                      slack\n                      website\n                      twitter\n                      email\n                    }\n                    verified\n                    serviceDetails {\n                      storage\n                      retrieval\n                      repair\n                      onlineDeals\n                      offlineDeals\n                      storageAskPrice\n                      retrievalAskPrice\n                      minPieceSize\n                      maxPieceSize\n                    }\n                    financeMetrics(since: 565000, till: 570000) {\n                      totalIncome\n                      totalExpenditure\n                      blockRewards\n                      storageDealPayments\n                      retrievalDealPayments\n                      networkFee\n                      penalty\n                      preCommitDeposits\n                      initialPledge\n                      lockedFunds\n                      availableFunds\n                    }\n                    qualityIndicators {\n                      winCount\n                      blocksMined\n                      qualityAdjPower\n                      feeDebt\n                      dataStored\n                      faultySectors\n                    }\n                    transactions(since: 565000, till: 570000) {\n                      id\n                      height\n                      amount\n                      sender\n                      receiver\n                      direction\n                      minerFee\n                      burnFee\n                      actorName\n                      methodName\n                      exitCode\n                    }\n                }\n              }`,\n      variables: {\n        id: this.props.match.params.address\n      }\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      console.log(res.data);\n      var minerdata = res.data.data.miner;\n      console.log('fetching textile data');\n      axios.get('https://minerindex.hub.textile.io/v1/index/miner/' + this.props.match.params.address, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res.data);\n        var textiledata = res.data.info;\n        minerdata.location = textiledata.metadata.location;\n        minerdata.qualityIndicators.relativePower = textiledata.filecoin.relativePower;\n        minerdata.qualityIndicators.activeSectors = textiledata.filecoin.activeSectors;\n        minerdata.serviceDetails.storageAskPrice = textiledata.filecoin.askPrice;\n        minerdata.serviceDetails.sectorSize = textiledata.filecoin.sectorSize;\n        minerdata.serviceDetails.minPieceSize = textiledata.filecoin.minPieceSize;\n        minerdata.serviceDetails.maxPieceSize = textiledata.filecoin.maxPieceSize;\n        minerdata.storageDealSummary = textiledata.dealsSummary;\n        minerdata.retrievalDealSummary = textiledata.retrievalsSummary;\n        console.log('final miner data');\n        console.log(minerdata);\n        console.log('fetching address history');\n        axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          console.log('address history fetched successfully');\n          console.log(res.data);\n\n          if (this.props.match.params.address in res.data) {\n            minerdata.ownerChanges = res.data[minerId].ownerChanges;\n            minerdata.workerChanges = res.data[minerId].workerChanges;\n          } else {\n            minerdata.ownerChanges = null;\n            minerdata.workerChanges = null;\n          }\n\n          this.setState({\n            data: minerdata,\n            responseStatus: \"success\"\n          });\n        }).catch(err => {\n          console.log('failure in fetching address history');\n          console.log(err);\n          minerdata.ownerChanges = null;\n          minerdata.workerChanges = null;\n          this.setState({\n            data: null,\n            responseStatus: \"failed\"\n          });\n        });\n      }).catch(err => {\n        console.log('failure in fetching data from textile');\n        console.log(err);\n        this.setState({\n          data: null,\n          responseStatus: \"failed\"\n        });\n      });\n    }).catch(err => {\n      console.log('failure in fetching data from miner marketplace api');\n      console.log(err);\n      this.setState({\n        data: null,\n        responseStatus: \"failed\"\n      });\n    });\n  }\n\n  formatFIL(value) {\n    if (value === \"\") {\n      value = 0;\n    } else {\n      value = parseInt(value);\n    } // console.log(value, typeof(value))\n\n\n    value = value / 10 ** 18; // console.log(value)\n\n    value = value.toFixed(4); // console.log(value)\n\n    return value.toString() + \" FIL\";\n  }\n\n  formatAdjPower(value) {\n    if (value === \"\") {\n      value = 0;\n    } else {\n      value = parseInt(value);\n    } // console.log(value, typeof(value))\n\n\n    if (value >= 1024 ** 6) {\n      value = value / 1024 ** 6;\n      value = value.toFixed(4);\n      value = value.toString() + \" EiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 5) {\n      value = value / 1024 ** 5;\n      value = value.toFixed(4);\n      value = value.toString() + \" PiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 4) {\n      value = value / 1024 ** 4;\n      value = value.toFixed(4);\n      value = value.toString() + \" TiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 3) {\n      value = value / 1024 ** 3;\n      value = value.toFixed(4);\n      value = value.toString() + \" GiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 2) {\n      value = value / 1024 ** 2;\n      value = value.toFixed(4);\n      value = value.toString() + \" MiB\";\n      return value;\n    }\n\n    if (value >= 1024) {\n      value = value / 1024;\n      value = value.toFixed(4);\n      value = value.toString() + \" KiB\";\n      return value;\n    }\n\n    return value.toString() + \" bytes\";\n  } // makeRequest() {\n  //     return new Promise(function (resolve, reject) {\n  //         axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n  //             headers: {\n  //                 'Content-Type': 'application/json'\n  //             }\n  //         })\n  //             .then(res => {\n  //                 console.log('address history fetched successfully')\n  //                 console.log(res.data)\n  //                 resolve(res.data)\n  //             })\n  //             .catch(err => {\n  //                 console.log('failure in fetching address history')\n  //                 console.log(err)\n  //                 reject(null)\n  //             })\n  //     })\n  // }\n  // getAddressHistory() {\n  //     console.log('fetching address history')\n  //     var minerId = this.props.match.params.address\n  //     var addressHistory = await this.makeRequest()\n  //     var data = {}\n  //     if (addressHistory && minerId in res.data) {\n  //         data = res.data[minerId]\n  //     } else {\n  //         data = {\n  //             \"ownerChanges\": null,\n  //             \"workerChanges\": null\n  //         }\n  //     }\n  //     axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n  //         headers: {\n  //             'Content-Type': 'application/json'\n  //         }\n  //     })\n  //         .then(res => {\n  //             console.log('address history fetched successfully')\n  //             console.log(res.data)\n  //             if (minerId in res.data) {\n  //                 data = res.data[minerId]\n  //             } else {\n  //                 data = {\n  //                     \"ownerChanges\": null,\n  //                     \"workerChanges\": null\n  //                 }\n  //             }\n  //         })\n  //         .catch(err => {\n  //             console.log('failure in fetching address history')\n  //             console.log(err)\n  //             data = {\n  //                 \"ownerChanges\": null,\n  //                 \"workerChanges\": null\n  //             }\n  //         })\n  //     return data\n  // }\n\n\n  render() {\n    if (!this.state.responseStatus) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }\n      }, \"Fetching data from the server...\"));\n    } else {\n      if (this.state.data) {\n        var data = this.state.data;\n        console.log(\"miner data\");\n        console.log(data);\n        var history = this.getAddressHistory();\n        console.log('history data');\n        console.log(history);\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(PageHeader, {\n          className: \"site-page-header\",\n          backIcon: \"false\",\n          title: \"Miner Profile \",\n          subTitle: this.props.match.params.address,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Basic Info\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 29\n          }\n        }, \"Name : \", data.name, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 29\n          }\n        }, \"Bio : \", data.bio, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 29\n          }\n        }, \"Location : \", data.location, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }\n        }, \"Id : \", data.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 29\n          }\n        }, \"Owner : \", data.owner.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 29\n          }\n        }, \"Worker : \", data.worker.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 29\n          }\n        }, \"Verified: \", data.verified ? \"Yes\" : \"No\")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Contact\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 29\n          }\n        }, \"Slack : \", data.contact.slack, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 29\n          }\n        }, \"Twitter : \", data.contact.twitter, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 29\n          }\n        }, \"Email : \", data.contact.email, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }\n        }, \"Website : \", data.contact.website, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Service Details\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }\n        }, \"Storage : \", data.serviceDetails.storage ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 29\n          }\n        }, \"Retrieval : \", data.serviceDetails.retrieval ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 29\n          }\n        }, \"Repair : \", data.serviceDetails.repair ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 29\n          }\n        }, \"Online Deals : \", data.serviceDetails.onlineDeals ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 29\n          }\n        }, \"Offline Deals : \", data.serviceDetails.offlineDeals ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 29\n          }\n        }, \"Storage Ask Price : \", this.formatFIL(data.serviceDetails.storageAskPrice) + \"/GiB/epoch\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 29\n          }\n        }, \"Retrieval Ask Price : \", data.serviceDetails.retrievalAskPrice, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 29\n          }\n        }, \"Sector Size : \", this.formatAdjPower(data.serviceDetails.sectorSize), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 29\n          }\n        }, \"Minimum Piece Size : \", this.formatAdjPower(data.serviceDetails.minPieceSize), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 29\n          }\n        }, \"Maximum Piece Size : \", this.formatAdjPower(data.serviceDetails.maxPieceSize), \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Financial Metrics\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 29\n          }\n        }, \"Total Income : \", this.formatFIL(data.financeMetrics.totalIncome), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 29\n          }\n        }, \"Total Expenditure : \", this.formatFIL(data.financeMetrics.totalExpenditure), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 29\n          }\n        }, \"Block Rewards : \", this.formatFIL(data.financeMetrics.blockRewards), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 29\n          }\n        }, \"Storage Deal Payments : \", this.formatFIL(data.financeMetrics.blockRewards), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 29\n          }\n        }, \"Retrieval Deal Payments : \", this.formatFIL(data.financeMetrics.retrievalDealPayments), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 29\n          }\n        }, \"Network Fee : \", this.formatFIL(data.financeMetrics.networkFee), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 29\n          }\n        }, \"Penalty : \", this.formatFIL(data.financeMetrics.penalty), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 29\n          }\n        }, \"PreCommit Deposits : \", this.formatFIL(data.financeMetrics.preCommitDeposits), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 29\n          }\n        }, \"Initial Pledge : \", this.formatFIL(data.financeMetrics.initialPledge), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 29\n          }\n        }, \"Locked Funds : \", this.formatFIL(data.financeMetrics.lockedFunds), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 29\n          }\n        }, \"Available Funds : \", this.formatFIL(data.financeMetrics.availableFunds), \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Quality Indicators\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 29\n          }\n        }, \"Win Count : \", data.qualityIndicators.winCount, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 29\n          }\n        }, \"Blocks Mined : \", data.qualityIndicators.blocksMined, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 29\n          }\n        }, \"Quality Adjusted Power: \", this.formatAdjPower(data.qualityIndicators.qualityAdjPower), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 29\n          }\n        }, \"Active Sectors: \", data.qualityIndicators.activeSectors, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 29\n          }\n        }, \"Faulty Sectors: \", data.qualityIndicators.faultySectors, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Worker Address History\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(AddressChangeTable, {\n          data: history.workerChanges,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 29\n          }\n        })), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Owner Address History\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(AddressChangeTable, {\n          data: history.ownerChanges,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 29\n          }\n        })), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Transaction History\",\n          style: {\n            width: \"93vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(TransactionTable, {\n          data: data.transactions,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 29\n          }\n        })), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 21\n          }\n        }, \"Error in fetching data from the server. See console for more details.\");\n      }\n    }\n  }\n\n}\nexport default MinerProfile;","map":{"version":3,"sources":["/Users/saumay/Desktop/miner-marketplace-frontend/src/components/pages/MinerProfile.js"],"names":["React","Component","PriceHistoryGraph","axios","PageHeader","Config","Layout","Menu","Breadcrumb","Card","TransactionTable","AddressChangeTable","Header","Content","Footer","MinerProfile","state","data","responseStatus","componentDidMount","console","log","props","match","params","address","post","miner_marketplace_api","query","variables","id","headers","then","res","minerdata","miner","get","textiledata","info","location","metadata","qualityIndicators","relativePower","filecoin","activeSectors","serviceDetails","storageAskPrice","askPrice","sectorSize","minPieceSize","maxPieceSize","storageDealSummary","dealsSummary","retrievalDealSummary","retrievalsSummary","ownerChanges","minerId","workerChanges","setState","catch","err","formatFIL","value","parseInt","toFixed","toString","formatAdjPower","render","history","getAddressHistory","width","name","bio","owner","worker","verified","contact","slack","twitter","email","website","storage","retrieval","repair","onlineDeals","offlineDeals","retrievalAskPrice","financeMetrics","totalIncome","totalExpenditure","blockRewards","retrievalDealPayments","networkFee","penalty","preCommitDeposits","initialPledge","lockedFunds","availableFunds","winCount","blocksMined","qualityAdjPower","faultySectors","transactions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PriceHistoryGraph from '../PriceHistoryGraph'\nimport axios from 'axios'\nimport { PageHeader } from 'antd';\nimport Config from '../../Config';\n\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Card } from 'antd';\nimport TransactionTable from '../TransactionTable';\nimport AddressChangeTable from '../AddressChangeTable';\nconst { Header, Content, Footer } = Layout;\n\n\n\nexport class MinerProfile extends Component {\n\n    state = {\n        data: null,\n        responseStatus: null\n    }\n\n    componentDidMount() {\n        console.log(this.props.match.params.address + \" miner id\")\n        axios.post(Config.miner_marketplace_api, {\n            query: `query ($id: ID!) {\n                miner(id: $id) {\n                    id\n                    address\n                    name\n                    bio\n                    owner {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    worker {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    contact {\n                      email\n                      slack\n                      website\n                      twitter\n                      email\n                    }\n                    verified\n                    serviceDetails {\n                      storage\n                      retrieval\n                      repair\n                      onlineDeals\n                      offlineDeals\n                      storageAskPrice\n                      retrievalAskPrice\n                      minPieceSize\n                      maxPieceSize\n                    }\n                    financeMetrics(since: 565000, till: 570000) {\n                      totalIncome\n                      totalExpenditure\n                      blockRewards\n                      storageDealPayments\n                      retrievalDealPayments\n                      networkFee\n                      penalty\n                      preCommitDeposits\n                      initialPledge\n                      lockedFunds\n                      availableFunds\n                    }\n                    qualityIndicators {\n                      winCount\n                      blocksMined\n                      qualityAdjPower\n                      feeDebt\n                      dataStored\n                      faultySectors\n                    }\n                    transactions(since: 565000, till: 570000) {\n                      id\n                      height\n                      amount\n                      sender\n                      receiver\n                      direction\n                      minerFee\n                      burnFee\n                      actorName\n                      methodName\n                      exitCode\n                    }\n                }\n              }`,\n            variables: {\n                id: this.props.match.params.address\n            }\n        },\n            {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(res => {\n                console.log(res.data)\n                var minerdata = res.data.data.miner\n                console.log('fetching textile data')\n\n                axios.get('https://minerindex.hub.textile.io/v1/index/miner/' + this.props.match.params.address, {\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                })\n                    .then(res => {\n                        console.log(res.data)\n                        var textiledata = res.data.info\n\n                        minerdata.location = textiledata.metadata.location\n\n                        minerdata.qualityIndicators.relativePower = textiledata.filecoin.relativePower\n                        minerdata.qualityIndicators.activeSectors = textiledata.filecoin.activeSectors\n\n                        minerdata.serviceDetails.storageAskPrice = textiledata.filecoin.askPrice\n                        minerdata.serviceDetails.sectorSize = textiledata.filecoin.sectorSize\n                        minerdata.serviceDetails.minPieceSize = textiledata.filecoin.minPieceSize\n                        minerdata.serviceDetails.maxPieceSize = textiledata.filecoin.maxPieceSize\n\n                        minerdata.storageDealSummary = textiledata.dealsSummary\n                        minerdata.retrievalDealSummary = textiledata.retrievalsSummary\n\n                        console.log('final miner data')\n                        console.log(minerdata)\n\n                        console.log('fetching address history')\n                        axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n                            headers: {\n                                'Content-Type': 'application/json'\n                            }\n                        })\n                            .then(res => {\n                                console.log('address history fetched successfully')\n                                console.log(res.data)\n\n                                if (this.props.match.params.address in res.data) {\n                                    minerdata.ownerChanges = res.data[minerId].ownerChanges\n                                    minerdata.workerChanges = res.data[minerId].workerChanges\n                                } else {\n                                    minerdata.ownerChanges = null\n                                    minerdata.workerChanges = null\n                                }\n\n                                this.setState({ data: minerdata, responseStatus: \"success\" })\n\n                            })\n                            .catch(err => {\n                                console.log('failure in fetching address history')\n                                console.log(err)\n                                minerdata.ownerChanges = null\n                                minerdata.workerChanges = null\n\n                                this.setState({ data: null, responseStatus: \"failed\" })\n                            })\n\n                    })\n                    .catch(err => {\n                        console.log('failure in fetching data from textile')\n                        console.log(err)\n                        this.setState({ data: null, responseStatus: \"failed\" })\n                    })\n\n            })\n            .catch(err => {\n                console.log('failure in fetching data from miner marketplace api')\n                console.log(err)\n                this.setState({ data: null, responseStatus: \"failed\" })\n            })\n    }\n\n    formatFIL(value) {\n        if (value === \"\") {\n            value = 0\n        } else {\n            value = parseInt(value)\n        }\n        // console.log(value, typeof(value))\n        value = value / (10 ** 18)\n        // console.log(value)\n        value = value.toFixed(4)\n        // console.log(value)\n        return value.toString() + \" FIL\"\n    }\n\n    formatAdjPower(value) {\n        if (value === \"\") {\n            value = 0\n        } else {\n            value = parseInt(value)\n        }\n        // console.log(value, typeof(value))\n        if (value >= 1024 ** 6) {\n            value = value / (1024 ** 6)\n            value = value.toFixed(4)\n            value = value.toString() + \" EiB\"\n            return value\n        }\n        if (value >= 1024 ** 5) {\n            value = value / (1024 ** 5)\n            value = value.toFixed(4)\n            value = value.toString() + \" PiB\"\n            return value\n        }\n        if (value >= 1024 ** 4) {\n            value = value / (1024 ** 4)\n            value = value.toFixed(4)\n            value = value.toString() + \" TiB\"\n            return value\n        }\n        if (value >= 1024 ** 3) {\n            value = value / (1024 ** 3)\n            value = value.toFixed(4)\n            value = value.toString() + \" GiB\"\n            return value\n        }\n        if (value >= 1024 ** 2) {\n            value = value / (1024 ** 2)\n            value = value.toFixed(4)\n            value = value.toString() + \" MiB\"\n            return value\n        }\n        if (value >= 1024) {\n            value = value / (1024)\n            value = value.toFixed(4)\n            value = value.toString() + \" KiB\"\n            return value\n        }\n        return value.toString() + \" bytes\"\n    }\n\n    // makeRequest() {\n    //     return new Promise(function (resolve, reject) {\n    //         axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n    //             headers: {\n    //                 'Content-Type': 'application/json'\n    //             }\n    //         })\n    //             .then(res => {\n    //                 console.log('address history fetched successfully')\n    //                 console.log(res.data)\n    //                 resolve(res.data)\n    //             })\n    //             .catch(err => {\n    //                 console.log('failure in fetching address history')\n    //                 console.log(err)\n    //                 reject(null)\n    //             })\n    //     })\n    // }\n\n    // getAddressHistory() {\n    //     console.log('fetching address history')\n    //     var minerId = this.props.match.params.address\n\n    //     var addressHistory = await this.makeRequest()\n    //     var data = {}\n\n    //     if (addressHistory && minerId in res.data) {\n    //         data = res.data[minerId]\n    //     } else {\n    //         data = {\n    //             \"ownerChanges\": null,\n    //             \"workerChanges\": null\n    //         }\n    //     }\n\n    //     axios.get('http://ec2-18-237-94-115.us-west-2.compute.amazonaws.com/addrChanges.json', {\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //         }\n    //     })\n    //         .then(res => {\n    //             console.log('address history fetched successfully')\n    //             console.log(res.data)\n\n    //             if (minerId in res.data) {\n    //                 data = res.data[minerId]\n    //             } else {\n    //                 data = {\n    //                     \"ownerChanges\": null,\n    //                     \"workerChanges\": null\n    //                 }\n    //             }\n\n\n    //         })\n    //         .catch(err => {\n    //             console.log('failure in fetching address history')\n    //             console.log(err)\n    //             data = {\n    //                 \"ownerChanges\": null,\n    //                 \"workerChanges\": null\n    //             }\n    //         })\n\n    //     return data\n    // }\n\n    render() {\n        if (!this.state.responseStatus) {\n            return (\n                <React.Fragment>\n                    <p>Fetching data from the server...</p>\n                </React.Fragment>\n            )\n        } else {\n            if (this.state.data) {\n                var data = this.state.data\n                console.log(\"miner data\")\n                console.log(data)\n\n                var history = this.getAddressHistory()\n                console.log('history data')\n                console.log(history)\n\n                return (\n                    <div>\n                        <PageHeader\n                            className=\"site-page-header\"\n                            backIcon=\"false\"\n                            title=\"Miner Profile \"\n                            subTitle={this.props.match.params.address}\n                        />\n                        {/* <PriceHistoryGraph data={this.state.data} style={{ width: \"80vw\", height: \"75vh\"}}/> */}\n                        <Card title=\"Basic Info\" style={{ width: \"93vw\" }}>\n                            <p>Name : {data.name} </p>\n                            <p>Bio : {data.bio} </p>\n                            <p>Location : {data.location} </p>\n                            <p>Id : {data.id} </p>\n                            <p>Owner : {data.owner.id} </p>\n                            <p>Worker : {data.worker.id} </p>\n                            <p>Verified: {data.verified ? \"Yes\" : \"No\"}</p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Contact\" style={{ width: \"93vw\" }}>\n                            <p>Slack : {data.contact.slack} </p>\n                            <p>Twitter : {data.contact.twitter} </p>\n                            <p>Email : {data.contact.email} </p>\n                            <p>Website : {data.contact.website} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Service Details\" style={{ width: \"93vw\" }}>\n                            <p>Storage : {data.serviceDetails.storage ? \"Yes\" : \"No\"} </p>\n                            <p>Retrieval : {data.serviceDetails.retrieval ? \"Yes\" : \"No\"} </p>\n                            <p>Repair : {data.serviceDetails.repair ? \"Yes\" : \"No\"} </p>\n                            <p>Online Deals : {data.serviceDetails.onlineDeals ? \"Yes\" : \"No\"} </p>\n                            <p>Offline Deals : {data.serviceDetails.offlineDeals ? \"Yes\" : \"No\"} </p>\n                            <p>Storage Ask Price : {this.formatFIL(data.serviceDetails.storageAskPrice) + \"/GiB/epoch\"} </p>\n                            <p>Retrieval Ask Price : {data.serviceDetails.retrievalAskPrice} </p>\n                            <p>Sector Size : {this.formatAdjPower(data.serviceDetails.sectorSize)} </p>\n                            <p>Minimum Piece Size : {this.formatAdjPower(data.serviceDetails.minPieceSize)} </p>\n                            <p>Maximum Piece Size : {this.formatAdjPower(data.serviceDetails.maxPieceSize)} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Financial Metrics\" style={{ width: \"93vw\" }}>\n                            <p>Total Income : {this.formatFIL(data.financeMetrics.totalIncome)} </p>\n                            <p>Total Expenditure : {this.formatFIL(data.financeMetrics.totalExpenditure)} </p>\n                            <p>Block Rewards : {this.formatFIL(data.financeMetrics.blockRewards)} </p>\n                            <p>Storage Deal Payments : {this.formatFIL(data.financeMetrics.blockRewards)} </p>\n                            <p>Retrieval Deal Payments : {this.formatFIL(data.financeMetrics.retrievalDealPayments)} </p>\n                            <p>Network Fee : {this.formatFIL(data.financeMetrics.networkFee)} </p>\n                            <p>Penalty : {this.formatFIL(data.financeMetrics.penalty)} </p>\n                            <p>PreCommit Deposits : {this.formatFIL(data.financeMetrics.preCommitDeposits)} </p>\n                            <p>Initial Pledge : {this.formatFIL(data.financeMetrics.initialPledge)} </p>\n                            <p>Locked Funds : {this.formatFIL(data.financeMetrics.lockedFunds)} </p>\n                            <p>Available Funds : {this.formatFIL(data.financeMetrics.availableFunds)} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Quality Indicators\" style={{ width: \"93vw\" }}>\n                            <p>Win Count : {data.qualityIndicators.winCount} </p>\n                            <p>Blocks Mined : {data.qualityIndicators.blocksMined} </p>\n                            <p>Quality Adjusted Power: {this.formatAdjPower(data.qualityIndicators.qualityAdjPower)} </p>\n                            <p>Active Sectors: {data.qualityIndicators.activeSectors} </p>\n                            <p>Faulty Sectors: {data.qualityIndicators.faultySectors} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Worker Address History\" style={{ width: \"93vw\" }}>\n                            <AddressChangeTable data={history.workerChanges}></AddressChangeTable>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Owner Address History\" style={{ width: \"93vw\" }}>\n                            <AddressChangeTable data={history.ownerChanges}></AddressChangeTable>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Transaction History\" style={{ width: \"93vw\" }}>\n                            <TransactionTable data={data.transactions}></TransactionTable>\n                        </Card>\n                        <br></br>\n                    </div>\n                )\n            } else {\n                return (\n                    <div>Error in fetching data from the server. See console for more details.</div>\n                )\n            }\n        }\n    }\n}\n\nexport default MinerProfile"]},"metadata":{},"sourceType":"module"}