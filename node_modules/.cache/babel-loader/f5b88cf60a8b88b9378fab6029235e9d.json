{"ast":null,"code":"var _jsxFileName = \"/Users/saumay/Desktop/miner-marketplace-frontend/src/components/pages/MinerProfile.js\";\nimport React, { Component } from 'react';\nimport PriceHistoryGraph from '../PriceHistoryGraph';\nimport axios from 'axios';\nimport { PageHeader } from 'antd';\nimport Config from '../../Config';\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Card } from 'antd';\nimport TransactionTable from '../TransactionTable';\nconst {\n  Header,\n  Content,\n  Footer\n} = Layout;\nexport class MinerProfile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      responseStatus: null\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.match.params.address + \" miner id\");\n    axios.post(Config.miner_marketplace_api, {\n      query: `query ($id: ID!) {\n                miner(id: $id) {\n                    id\n                    address\n                    name\n                    bio\n                    owner {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    worker {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    contact {\n                      email\n                      slack\n                      website\n                      twitter\n                      email\n                    }\n                    verified\n                    serviceDetails {\n                      storage\n                      retrieval\n                      repair\n                      onlineDeals\n                      offlineDeals\n                      storageAskPrice\n                      retrievalAskPrice\n                      minPieceSize\n                      maxPieceSize\n                    }\n                    financeMetrics(since: 560000, till: 570000) {\n                      totalIncome\n                      totalExpenditure\n                      blockRewards\n                      storageDealPayments\n                      retrievalDealPayments\n                      networkFee\n                      penalty\n                      preCommitDeposits\n                      initialPledge\n                      lockedFunds\n                      availableFunds\n                    }\n                    qualityIndicators {\n                      winCount\n                      blocksMined\n                      qualityAdjPower\n                      feeDebt\n                      dataStored\n                      faultySectors\n                    }\n                    transactions(since: 560000, till: 570000) {\n                      id\n                      height\n                      amount\n                      sender\n                      receiver\n                      direction\n                      minerFee\n                      burnFee\n                      actorName\n                      methodName\n                      exitCode\n                    }\n                }\n              }`,\n      variables: {\n        id: this.props.match.params.address\n      }\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      console.log(res.data);\n      this.setState({\n        data: res.data,\n        responseStatus: \"success\"\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        data: null,\n        responseStatus: \"failed\"\n      });\n    });\n  }\n\n  formatFIL(value) {\n    if (value === \"\") {\n      value = 0;\n    } else {\n      value = parseInt(value);\n    } // console.log(value, typeof(value))\n\n\n    value = value / 10 ** 18; // console.log(value)\n\n    value = value.toFixed(4); // console.log(value)\n\n    return value.toString() + \" FIL\";\n  }\n\n  formatAdjPower(value) {\n    if (value === \"\") {\n      value = 0;\n    } else {\n      value = parseInt(value);\n    } // console.log(value, typeof(value))\n\n\n    if (value >= 1024 ** 6) {\n      value = value / 1024 ** 6;\n      value = value.toFixed(4);\n      value = value.toString() + \" EiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 5) {\n      value = value / 1024 ** 5;\n      value = value.toFixed(4);\n      value = value.toString() + \" PiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 4) {\n      value = value / 1024 ** 4;\n      value = value.toFixed(4);\n      value = value.toString() + \" TiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 3) {\n      value = value / 1024 ** 3;\n      value = value.toFixed(4);\n      value = value.toString() + \" GiB\";\n      return value;\n    }\n\n    if (value >= 1024 ** 2) {\n      value = value / 1024 ** 2;\n      value = value.toFixed(4);\n      value = value.toString() + \" MiB\";\n      return value;\n    }\n\n    if (value >= 1024) {\n      value = value / 1024;\n      value = value.toFixed(4);\n      value = value.toString() + \" KiB\";\n      return value;\n    }\n\n    return value.toString() + \" bytes\";\n  }\n\n  render() {\n    if (!this.state.responseStatus) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, \"Fetching data from the server...\"));\n    } else {\n      if (this.state.data.data.miner) {\n        const data = this.state.data.data.miner;\n        console.log(\"miner data\");\n        console.log(data);\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(PageHeader, {\n          className: \"site-page-header\",\n          backIcon: \"false\",\n          title: \"Miner Profile \",\n          subTitle: this.props.match.params.address,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Basic Info\",\n          style: {\n            width: \"90vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 29\n          }\n        }, \"Name : \", data.name, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }\n        }, \"Bio : \", data.bio, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 29\n          }\n        }, \"Id : \", data.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 29\n          }\n        }, \"Owner : \", data.owner.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }\n        }, \"Worker : \", data.worker.id, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 29\n          }\n        }, \"Verified: \", data.verified ? \"Yes\" : \"No\")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Contact\",\n          style: {\n            width: \"90vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 29\n          }\n        }, \"Slack : \", data.contact.slack, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }\n        }, \"Twitter : \", data.contact.twitter, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 29\n          }\n        }, \"Email : \", data.contact.email, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 29\n          }\n        }, \"Website : \", data.contact.website, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Service Details\",\n          style: {\n            width: \"90vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 29\n          }\n        }, \"Storage : \", data.serviceDetails.storage ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 29\n          }\n        }, \"Retrieval : \", data.serviceDetails.retrieval ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 29\n          }\n        }, \"Repair : \", data.serviceDetails.repair ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 29\n          }\n        }, \"Online Deals : \", data.serviceDetails.onlineDeals ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }\n        }, \"Offline Deals : \", data.serviceDetails.offlineDeals ? \"Yes\" : \"No\", \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 29\n          }\n        }, \"Storage Ask Price : \", data.serviceDetails.storageAskPrice, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 29\n          }\n        }, \"Retrieval Ask Price : \", data.retrievalAskPrice, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Finance Metrics\",\n          style: {\n            width: \"90vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 29\n          }\n        }, \"Total Income : \", this.formatFIL(data.financeMetrics.totalIncome), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 29\n          }\n        }, \"Total Expenditure : \", this.formatFIL(data.financeMetrics.totalExpenditure), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 29\n          }\n        }, \"Block Rewards : \", this.formatFIL(data.financeMetrics.blockRewards), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }\n        }, \"Storage Deal Payments : \", this.formatFIL(data.financeMetrics.blockRewards), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 29\n          }\n        }, \"Retrieval Deal Payments : \", this.formatFIL(data.financeMetrics.retrievalDealPayments), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 29\n          }\n        }, \"Network Fee : \", this.formatFIL(data.financeMetrics.networkFee), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 29\n          }\n        }, \"Penalty : \", this.formatFIL(data.financeMetrics.penalty), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 29\n          }\n        }, \"PreCommit Deposits : \", this.formatFIL(data.financeMetrics.preCommitDeposits), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 29\n          }\n        }, \"Initial Pledge : \", this.formatFIL(data.financeMetrics.initialPledge), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 29\n          }\n        }, \"Locked Funds : \", this.formatFIL(data.financeMetrics.lockedFunds), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 29\n          }\n        }, \"Available Funds : \", this.formatFIL(data.financeMetrics.availableFunds), \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(Card, {\n          title: \"Quality Indicators\",\n          style: {\n            width: \"90vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }\n        }, \"Win Count : \", data.qualityIndicators.winCount, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }\n        }, \"Blocks Mined : \", data.qualityIndicators.blocksMined, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 29\n          }\n        }, \"Quality Adjusted Power: \", this.formatAdjPower(data.qualityIndicators.qualityAdjPower), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }\n        }, \"Faulty Sectors: \", data.qualityIndicators.faultySectors, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(TransactionTable, {\n          data: data.transactions,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 21\n          }\n        }, \"Error in fetching data from the server. See console for more details.\");\n      }\n    }\n  }\n\n}\nexport default MinerProfile;","map":{"version":3,"sources":["/Users/saumay/Desktop/miner-marketplace-frontend/src/components/pages/MinerProfile.js"],"names":["React","Component","PriceHistoryGraph","axios","PageHeader","Config","Layout","Menu","Breadcrumb","Card","TransactionTable","Header","Content","Footer","MinerProfile","state","data","responseStatus","componentDidMount","console","log","props","match","params","address","post","miner_marketplace_api","query","variables","id","headers","then","res","setState","catch","err","formatFIL","value","parseInt","toFixed","toString","formatAdjPower","render","miner","width","name","bio","owner","worker","verified","contact","slack","twitter","email","website","serviceDetails","storage","retrieval","repair","onlineDeals","offlineDeals","storageAskPrice","retrievalAskPrice","financeMetrics","totalIncome","totalExpenditure","blockRewards","retrievalDealPayments","networkFee","penalty","preCommitDeposits","initialPledge","lockedFunds","availableFunds","qualityIndicators","winCount","blocksMined","qualityAdjPower","faultySectors","transactions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PriceHistoryGraph from '../PriceHistoryGraph'\nimport axios from 'axios'\nimport { PageHeader } from 'antd';\nimport Config from '../../Config';\n\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Card } from 'antd';\nimport TransactionTable from '../TransactionTable';\nconst { Header, Content, Footer } = Layout;\n\n\n\nexport class MinerProfile extends Component {\n\n    state = {\n        data: null,\n        responseStatus: null\n    }\n\n    componentDidMount() {\n        console.log(this.props.match.params.address + \" miner id\")\n        axios.post(Config.miner_marketplace_api, {\n            query: `query ($id: ID!) {\n                miner(id: $id) {\n                    id\n                    address\n                    name\n                    bio\n                    owner {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    worker {\n                      id\n                      address\n                      actor\n                      balance\n                      messages\n                      createdAt\n                      latestTransactionAt\n                    }\n                    contact {\n                      email\n                      slack\n                      website\n                      twitter\n                      email\n                    }\n                    verified\n                    serviceDetails {\n                      storage\n                      retrieval\n                      repair\n                      onlineDeals\n                      offlineDeals\n                      storageAskPrice\n                      retrievalAskPrice\n                      minPieceSize\n                      maxPieceSize\n                    }\n                    financeMetrics(since: 560000, till: 570000) {\n                      totalIncome\n                      totalExpenditure\n                      blockRewards\n                      storageDealPayments\n                      retrievalDealPayments\n                      networkFee\n                      penalty\n                      preCommitDeposits\n                      initialPledge\n                      lockedFunds\n                      availableFunds\n                    }\n                    qualityIndicators {\n                      winCount\n                      blocksMined\n                      qualityAdjPower\n                      feeDebt\n                      dataStored\n                      faultySectors\n                    }\n                    transactions(since: 560000, till: 570000) {\n                      id\n                      height\n                      amount\n                      sender\n                      receiver\n                      direction\n                      minerFee\n                      burnFee\n                      actorName\n                      methodName\n                      exitCode\n                    }\n                }\n              }`,\n            variables: {\n                id: this.props.match.params.address\n            }\n        },\n            {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(res => {\n                console.log(res.data)\n                this.setState({ data: res.data, responseStatus: \"success\" })\n            })\n            .catch(err => {\n                console.log(err)\n                this.setState({ data: null, responseStatus: \"failed\" })\n            })\n    }\n\n    formatFIL(value) {\n        if (value===\"\") {\n            value = 0\n        } else {\n            value = parseInt(value)\n        }\n        // console.log(value, typeof(value))\n        value = value / (10**18)\n        // console.log(value)\n        value = value.toFixed(4)\n        // console.log(value)\n        return value.toString() + \" FIL\"\n    }\n\n    formatAdjPower(value) {\n        if (value===\"\") {\n            value = 0\n        } else {\n            value = parseInt(value)\n        }\n        // console.log(value, typeof(value))\n        if (value >= 1024**6) {\n            value = value / (1024**6)\n            value = value.toFixed(4)\n            value = value.toString() + \" EiB\"\n            return value\n        }\n        if (value >= 1024**5) {\n            value = value / (1024**5)\n            value = value.toFixed(4)\n            value = value.toString() + \" PiB\"\n            return value\n        }\n        if (value >= 1024**4) {\n            value = value / (1024**4)\n            value = value.toFixed(4)\n            value = value.toString() + \" TiB\"\n            return value\n        }\n        if (value >= 1024**3) {\n            value = value / (1024**3)\n            value = value.toFixed(4)\n            value = value.toString() + \" GiB\"\n            return value\n        }\n        if (value >= 1024**2) {\n            value = value / (1024**2)\n            value = value.toFixed(4)\n            value = value.toString() + \" MiB\"\n            return value\n        }\n        if (value >= 1024) {\n            value = value / (1024)\n            value = value.toFixed(4)\n            value = value.toString() + \" KiB\"\n            return value\n        }\n        return value.toString() + \" bytes\"\n    }\n\n    render() {\n        if (!this.state.responseStatus) {\n            return (\n                <React.Fragment>\n                    <p>Fetching data from the server...</p>\n                </React.Fragment>\n            )\n        } else {\n            if (this.state.data.data.miner) {\n                const data = this.state.data.data.miner;\n                console.log(\"miner data\")\n                console.log(data)\n                return (\n                    <div>\n                        <PageHeader\n                            className=\"site-page-header\"\n                            backIcon=\"false\"\n                            title=\"Miner Profile \"\n                            subTitle={this.props.match.params.address}\n                        />\n                        {/* <PriceHistoryGraph data={this.state.data} style={{ width: \"80vw\", height: \"75vh\"}}/> */}\n                        <Card title=\"Basic Info\" style={{ width: \"90vw\" }}>\n                            <p>Name : {data.name} </p>\n                            <p>Bio : {data.bio} </p>\n                            <p>Id : {data.id} </p>\n                            <p>Owner : {data.owner.id} </p>\n                            <p>Worker : {data.worker.id} </p>\n                            <p>Verified: {data.verified ? \"Yes\" : \"No\"}</p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Contact\" style={{ width: \"90vw\" }}>\n                            <p>Slack : {data.contact.slack} </p>\n                            <p>Twitter : {data.contact.twitter} </p>\n                            <p>Email : {data.contact.email} </p>\n                            <p>Website : {data.contact.website} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Service Details\" style={{ width: \"90vw\" }}>\n                            <p>Storage : {data.serviceDetails.storage ? \"Yes\" : \"No\"} </p>\n                            <p>Retrieval : {data.serviceDetails.retrieval ? \"Yes\" : \"No\"} </p>\n                            <p>Repair : {data.serviceDetails.repair ? \"Yes\" : \"No\"} </p>\n                            <p>Online Deals : {data.serviceDetails.onlineDeals ? \"Yes\" : \"No\"} </p>\n                            <p>Offline Deals : {data.serviceDetails.offlineDeals ? \"Yes\" : \"No\"} </p>\n                            <p>Storage Ask Price : {data.serviceDetails.storageAskPrice} </p>\n                            <p>Retrieval Ask Price : {data.retrievalAskPrice} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Finance Metrics\" style={{ width: \"90vw\" }}>\n                            <p>Total Income : {this.formatFIL(data.financeMetrics.totalIncome)} </p>\n                            <p>Total Expenditure : {this.formatFIL(data.financeMetrics.totalExpenditure)} </p>\n                            <p>Block Rewards : {this.formatFIL(data.financeMetrics.blockRewards)} </p>\n                            <p>Storage Deal Payments : {this.formatFIL(data.financeMetrics.blockRewards)} </p>\n                            <p>Retrieval Deal Payments : {this.formatFIL(data.financeMetrics.retrievalDealPayments)} </p>\n                            <p>Network Fee : {this.formatFIL(data.financeMetrics.networkFee)} </p>\n                            <p>Penalty : {this.formatFIL(data.financeMetrics.penalty)} </p>\n                            <p>PreCommit Deposits : {this.formatFIL(data.financeMetrics.preCommitDeposits)} </p>\n                            <p>Initial Pledge : {this.formatFIL(data.financeMetrics.initialPledge)} </p>\n                            <p>Locked Funds : {this.formatFIL(data.financeMetrics.lockedFunds)} </p>\n                            <p>Available Funds : {this.formatFIL(data.financeMetrics.availableFunds)} </p>\n                        </Card>\n                        <br></br>\n                        <Card title=\"Quality Indicators\" style={{ width: \"90vw\" }}>\n                            <p>Win Count : {data.qualityIndicators.winCount} </p>\n                            <p>Blocks Mined : {data.qualityIndicators.blocksMined} </p>\n                            <p>Quality Adjusted Power: {this.formatAdjPower(data.qualityIndicators.qualityAdjPower)} </p>\n                            <p>Faulty Sectors: {data.qualityIndicators.faultySectors} </p>\n                        </Card>\n                        <br></br>\n                        <TransactionTable data={data.transactions}></TransactionTable>\n                    </div>\n                )\n            } else {\n                return (\n                    <div>Error in fetching data from the server. See console for more details.</div>\n                )\n            }\n        }\n    }\n}\n\nexport default MinerProfile"]},"metadata":{},"sourceType":"module"}